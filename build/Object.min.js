/*! Object 4.0.0 2017-05-15  WaterTian */

function resizeCanvas(){var e=$(window).get(0).innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=$(window).get(0).innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return GAME.stageWidth=e,GAME.stageHeight=t,e>t?($("#landscape").width(e),$("#landscape").height(t),void $("#landscape").show()):view?($("#landscape").hide(),void $("html,body").scrollLeft(0)):void 0}function initStatsBar(){(stats=new Stats).domElement.style.position="absolute",stats.domElement.style.top="0px",document.body.appendChild(stats.domElement)}function init(){window.devicePixelRatio;renderer=PIXI.autoDetectRenderer(GAME.stageWidth,GAME.stageHeight,{backgroundColor:1087931}),GAME.renderer=renderer,(view=renderer.view).style.position="absolute",view.style.top="0px",view.style.left="0px",GAME.canvas=view,document.body.appendChild(view),stage=new PIXI.Container,GAME.stage=stage,GAME.imageScale=(Math.floor(GAME.stageWidth/640*100)+1)/100,GAME.positionScale=1*GAME.imageScale,(assetsManager=new GAME.AssetsManager).onComplete=function(){TweenMax.to(document.getElementById("loading"),1,{css:{alpha:0}}),TweenMax.delayedCall(1,function(){$("#loading").hide()}),initScene()},assetsManager.start(),animate()}function initScene(){var e=PIXI.Sprite.fromFrame("logo2.png");e.scale.y=e.scale.x=GAME.imageScale,stage.addChild(e),initScene1(),PIXI.sound.play("bg",{loop:!0})}function initScene1(){PIXI.sound.play("s1"),gameScene=new GAME.GameScene1,stage.addChild(gameScene),gameScene.init(),gameScene.sceneIn(),gameScene.addEventListener("SCENE_OUT_COMPLETE",function(e){stage.removeChild(gameScene),gameScene=null,initScene2()})}function initScene2(){PIXI.sound.play("s3"),gameScene=new GAME.GameScene2,stage.addChild(gameScene),gameScene.init(),gameScene.sceneIn(),gameScene.addEventListener("SCENE_OUT_COMPLETE",function(e){stage.removeChild(gameScene),gameScene=null})}function animate(){requestAnimationFrame(animate),GAME.renderer.render(GAME.stage),stats&&stats.update(),gameScene&&gameScene.update()}var GAME=GAME||{};GAME.stageWidth=0,GAME.stageHeight=0,GAME.stage=null,GAME.canvas=null,GAME.renderer=null,GAME.SCENE_IN="sceneIn",GAME.SCENE_OUT="sceneOut",GAME.SCENE_IN_COMPLETE="sceneInComplete",GAME.SCENE_OUT_COMPLETE="sceneOutComplete",GAME.ON_ENTER_FRAME="onEnterFrame",GAME.retinaSupport=!0,GAME.imageScale=1,GAME.positionScale=1,GAME.Utils=GAME.Utils||{},GAME.Utils.inherit=function(e,t){e.superClass=t,e.prototype=Object.create(t.prototype),e.prototype.constructor=e},GAME.Utils.extend=function(e,t){if(!t||"object"!=typeof t)return e;for(var a=Object.keys(t),n=a.length;n--;)e[a[n]]=t[a[n]];return e},GAME.Utils.isAndroid=function(){for(var e=navigator.userAgent,t=new Array("Android","SymbianOS","Windows Phone"),a=!1,n=0;n<t.length;n++)if(e.indexOf(t[n])>0){a=!0;break}return a},GAME.Utils.isM2=function(){var e=!1;return navigator.userAgent.indexOf("m2")>0&&(e=!0),e},GAME.EventDispatcher=function(){},GAME.EventDispatcher.prototype={constructor:GAME.EventDispatcher,addEventListener:function(e,t){return this._listeners?this.removeEventListener(e,t):this._listeners={},this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t),t},hasEventListener:function(e,t){var a=this._listeners;return!(!a||!a[e])},removeEventListener:function(e,t){if(this._listeners&&this._listeners[e])for(var a=this._listeners[e],n=0,i=a.length;n<i;n++)if(a[n]==t){1==i?delete this._listeners[e]:a.splice(n,1);break}},removeAllEventListeners:function(e){e?this._listeners&&delete this._listeners[e]:this._listeners=null},dispatchEvent:function(e,t){var a=!1,n=this._listeners;if(e&&n){var i=n[e];if(!i)return a;for(var s=(i=i.slice()).length;s--;){var o=i[s];a=a||o(t)}}return!!a}},GAME.AssetsManager=function(){var e=["assets/assets.json"],t={s1:"sound/s1.mp3",s2:"sound/s2.mp3",s3:"sound/s3.mp3",bg:"sound/bg.mp3"},a=new PIXI.loaders.Loader;this.onComplete=null,this.onProgress=function(e){console.log("加载百分比"+e.progress+"%")},this.start=function(){a.add(e),a.once("complete",this.onComplete),a.on("progress",this.onProgress),a.load(),PIXI.sound.add(t)}},GAME.Scene=function(){PIXI.Container.call(this)},GAME.Utils.inherit(GAME.Scene,PIXI.Container),GAME.Utils.extend(GAME.Scene.prototype,GAME.EventDispatcher.prototype),GAME.Scene.prototype.init=function(){},GAME.Scene.prototype.destroy=function(){},GAME.Scene.prototype.sceneIn=function(){this.dispatchEvent("SCENE_IN")},GAME.Scene.prototype.sceneOut=function(){this.dispatchEvent("SCENE_OUT")},GAME.Scene.prototype.sceneInComplete=function(){this.dispatchEvent("SCENE_IN_COMPLETE")},GAME.Scene.prototype.sceneOutComplete=function(){this.dispatchEvent("SCENE_OUT_COMPLETE")},GAME.GameScene1=function(){function e(){(n=new PIXI.Container).position.x=GAME.stageWidth/2,n.position.y=GAME.stageHeight,E.addChild(n),(h=PIXI.Sprite.fromFrame("t1.png")).scale.y=h.scale.x=GAME.imageScale,h.anchor.x=.5,n.addChild(h),h.position.y=-GAME.stageHeight,h.alpha=0,TweenMax.to(h,1,{alpha:1,ease:Strong.easeOut,delay:.6}),p=new PIXI.Text("Text1",{font:"50px Helvetica",fill:"#FFFFFF"}),n.addChild(p),p.anchor.x=.5,p.anchor.y=1,p.alpha=0,TweenMax.to(p,1,{alpha:1,ease:Strong.easeOut,delay:1}),TweenMax.to(p.position,1,{y:-460*GAME.positionScale,ease:Elastic.easeOut,delay:.8}),p.rotation=-.05,TweenMax.to(p,.1,{rotation:.1,ease:Linear.easeNone,repeat:-1,yoyo:!0,delay:2});var e=new PIXI.Graphics;e.lineStyle(0),e.beginFill(0,1),e.drawCircle(0,0,50),n.addChild(e),e.position.y=-460*GAME.positionScale,p.mask=e,(s=PIXI.Sprite.fromFrame("pic1.jpg")).scale.y=s.scale.x=GAME.imageScale,s.anchor.x=.5,s.anchor.y=1,n.addChild(s),s.alpha=0,TweenMax.to(s,1,{alpha:1,ease:Strong.easeOut,delay:1}),TweenMax.to(s.position,1,{y:Math.floor(-350*GAME.positionScale),ease:Elastic.easeOut,delay:1}),(o=PIXI.Sprite.fromFrame("pic2.jpg")).scale.y=o.scale.x=GAME.imageScale,o.anchor.x=.5,o.anchor.y=1,n.addChild(o),o.alpha=0,TweenMax.to(o,1,{alpha:1,ease:Strong.easeOut,delay:1.2}),TweenMax.to(o.position,1,{y:Math.floor(-210*GAME.positionScale),ease:Elastic.easeOut,delay:1.2}),(r=PIXI.Sprite.fromFrame("btn1.png")).scale.y=r.scale.x=GAME.imageScale,r.anchor.x=.5,r.anchor.y=1,n.addChild(r),r.alpha=0,TweenMax.to(r,1,{alpha:1,ease:Strong.easeOut,delay:1.4}),TweenMax.to(r.position,1,{y:-20*GAME.positionScale,ease:Elastic.easeOut,delay:1.4}),r.interactive=!0,r.mousedown=r.touchstart=function(){t(),a()}}function t(){TweenMax.to(n,.4,{alpha:0,onComplete:function(){E.removeChild(n),n=null}})}function a(){PIXI.sound.play("s2"),i=new PIXI.Container,E.addChild(i),(c=PIXI.Sprite.fromFrame("pic4.jpg")).scale.y=c.scale.x=GAME.imageScale,c.position.x=0,c.position.y=100*GAME.positionScale,i.addChild(c),c.alpha=0,TweenMax.to(c,.6,{alpha:1}),(l=PIXI.Sprite.fromFrame("pic5.png")).scale.y=l.scale.x=GAME.imageScale,l.anchor.x=.5,l.anchor.y=.5,l.position.x=GAME.stageWidth/2,l.position.y=GAME.stageHeight/2,i.addChild(l),l.scale.x=l.scale.y=0,TweenMax.to(l.scale,1,{x:GAME.imageScale,y:GAME.imageScale,ease:Elastic.easeOut,delay:.8}),(d=PIXI.Sprite.fromFrame("btn2.jpg")).scale.y=d.scale.x=GAME.imageScale,d.anchor.x=.5,d.anchor.y=.5,d.position.x=GAME.stageWidth/2,d.position.y=l.position.y+240*GAME.positionScale,i.addChild(d),d.scale.x=d.scale.y=0,TweenMax.to(d.scale,1,{x:GAME.imageScale,y:GAME.imageScale,ease:Elastic.easeOut,delay:.9}),d.interactive=!0,d.mousedown=d.touchstart=function(){E.sceneOut()}}GAME.Scene.call(this);var n,i,s,o,c,l,r,d,p,h,E=this,M=!1;this.init=function(){},this.sceneIn=function(){GAME.Scene.prototype.sceneIn.apply(this),e(),M=!0},this.update=function(){},this.sceneOut=function(){GAME.Scene.prototype.sceneOut.apply(this),TweenMax.to(this,.4,{alpha:0,onComplete:function(){E.sceneOutComplete()}})}},GAME.Utils.inherit(GAME.GameScene1,GAME.Scene),GAME.GameScene2=function(){function e(){(c=new PIXI.Container).x=GAME.stageWidth/2,c.y=GAME.stageHeight/2,M.addChild(c),(l=PIXI.Sprite.fromFrame("pic6.jpg")).scale.y=l.scale.x=GAME.imageScale,l.anchor.x=.5,c.addChild(l),l.alpha=0,TweenMax.to(l,1,{alpha:1,ease:Strong.easeOut,delay:.6}),TweenMax.to(l,1,{y:-300*GAME.positionScale,ease:Elastic.easeOut,delay:.6}),(r=PIXI.Sprite.fromFrame("pic7.png")).scale.y=r.scale.x=GAME.imageScale,r.anchor.x=.5,r.anchor.y=.5,c.addChild(r),r.scale.x=r.scale.y=0,TweenMax.to(r.scale,1,{x:GAME.imageScale,y:GAME.imageScale,ease:Elastic.easeOut,delay:.8}),(d=PIXI.Sprite.fromFrame("pic8.png")).anchor.x=.5,d.anchor.y=.5,c.addChild(d),d.x=-134*GAME.positionScale,d.y=-58*GAME.positionScale,d.scale.x=d.scale.y=0,TweenMax.to(d.scale,1,{x:GAME.imageScale,y:GAME.imageScale,ease:Elastic.easeOut,delay:.9}),(p=PIXI.Sprite.fromFrame("pic9.png")).anchor.x=.5,p.anchor.y=.5,c.addChild(p),p.x=-54*GAME.positionScale,p.y=-128*GAME.positionScale,p.scale.x=p.scale.y=0,TweenMax.to(p.scale,1,{x:GAME.imageScale,y:GAME.imageScale,ease:Elastic.easeOut,delay:1}),(h=PIXI.Sprite.fromFrame("pic10.png")).anchor.x=.5,h.anchor.y=.5,c.addChild(h),h.x=61*GAME.positionScale,h.y=-128*GAME.positionScale,h.scale.x=h.scale.y=0,TweenMax.to(h.scale,1,{x:GAME.imageScale,y:GAME.imageScale,ease:Elastic.easeOut,delay:1.1}),(E=PIXI.Sprite.fromFrame("pic11.png")).anchor.x=.5,E.anchor.y=.5,c.addChild(E),E.x=134*GAME.positionScale,E.y=-58*GAME.positionScale,E.scale.x=E.scale.y=0,TweenMax.to(E.scale,1,{x:GAME.imageScale,y:GAME.imageScale,ease:Elastic.easeOut,delay:1.2}),t();for(var e=0;e<4;e++){var n=new PIXI.Sprite(PIXI.Texture.fromFrame("pic7.png"));n.interactive=!0,n.buttonMode=!0,n.anchor.set(.5),n.scale.set(GAME.imageScale),n.on("mousedown",i).on("touchstart",i).on("mouseup",s).on("mouseupoutside",s).on("touchend",s).on("touchendoutside",s).on("mousemove",o).on("touchmove",o),n.x=Math.floor(200*Math.random()),n.y=Math.floor(200*Math.random()),M.addChild(n),a(n)}}function t(){m=new PIXI.ParticleContainer(1e4,{scale:!0,position:!0,alpha:!0}),M.addChild(m)}function a(e){for(var t=0;t<100;++t){var a=new PIXI.Sprite.fromFrame("star.png");a.anchor.set(.5),a.scale.set((Math.random()+1)*GAME.imageScale),a.x=e.x,a.y=e.y,a.parentObject=e,a.Xspeed=2*Math.random()-1,a.Yspeed=2*Math.random()-1,a.Aspeed=.01+.1*Math.random(),g.push(a),m.addChild(a)}}function n(){for(var e=0;e<g.length;e++){var t=g[e];t.alpha-=t.Aspeed,t.x+=t.Xspeed,t.y+=t.Yspeed,t.alpha<=0&&(t.x=t.parentObject.x,t.y=t.parentObject.y,t.alpha=1)}}function i(e){this.data=e.data,this.alpha=.99,this.dragging=!0,this.id=this.data.identifier}function s(e){e.data.identifier==this.id&&(this.alpha=1,this.dragging=!1,this.data=null,this.id=null)}function o(e){if(e.data.identifier==this.id&&this.dragging){var t=this.data.getLocalPosition(this.parent);this.x=t.x,this.y=t.y}}GAME.Scene.call(this);var c,l,r,d,p,h,E,M=this,u=!1;this.init=function(){},this.sceneIn=function(){GAME.Scene.prototype.sceneIn.apply(this),e(),u=!0},this.update=function(){u&&n()};var m,g=[];this.sceneOut=function(){}},GAME.Utils.inherit(GAME.GameScene2,GAME.Scene);var view,stage,renderer,gameScene,assetsManager,logo,stats;$(document).ready(function(){$(window).resize(resizeCanvas),resizeCanvas(),init(),initStatsBar()});