!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Sound=t()}}(function(){return function t(e,i,n){function s(r,a){if(!i[r]){if(!e[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(o)return o(r,!0);var h=new Error("Cannot find module '"+r+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[r]={exports:{}};e[r][0].call(c.exports,function(t){var i=e[r][1][t];return s(i||t)},c,c.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){this._output=e,this._input=t}return Object.defineProperty(t.prototype,"destination",{get:function(){return this._input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._filters},set:function(t){var e=this;if(this._filters&&(this._filters.forEach(function(t){t&&t.disconnect()}),this._filters=null,this._input.connect(this._output)),t&&t.length){this._filters=t.slice(0),this._input.disconnect();var i=null;t.forEach(function(t){null===i?e._input.connect(t.destination):i.connect(t.destination),i=t}),i.connect(this._output)}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.filters=null,this._input=null,this._output=null},t}();i.default=n},{}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./index"),s=["wav","mp3","ogg","oga","m4a"];function o(t,e){t.data&&s.indexOf(t._getExtension())>-1?t.sound=n.default.add(t.name,{loaded:e,preload:!0,srcBuffer:t.data}):e()}function r(){return o}i.install=function(){var t=PIXI.loaders.Resource;s.forEach(function(e){t.setExtensionXhrType(e,t.XHR_RESPONSE_TYPE.BUFFER),t.setExtensionLoadType(e,t.LOAD_TYPE.XHR)}),PIXI.loaders.Loader.addPixiMiddleware(r),PIXI.loader.use(o)}},{"./index":17}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./index"),s=t("./SoundInstance"),o=t("./SoundNodes"),r=t("./SoundSprite"),a=function(){function e(t,e){var i={};"string"==typeof e?i.src=e:e instanceof ArrayBuffer?i.srcBuffer=e:i=e,i=Object.assign({autoPlay:!1,singleInstance:!1,src:null,srcBuffer:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1,useXHR:!0},i),this._context=t,this._nodes=new o.default(this._context),this._source=this._nodes.bufferSource,this._instances=[],this._sprites={};var n=i.complete;this._autoPlayOptions=n?{complete:n}:null,this.isLoaded=!1,this.isPlaying=!1,this.autoPlay=i.autoPlay,this.singleInstance=i.singleInstance,this.preload=i.preload||this.autoPlay,this.src=i.src,this.srcBuffer=i.srcBuffer,this.useXHR=i.useXHR,this.volume=i.volume,this.loop=i.loop,this.speed=i.speed,i.sprites&&this.addSprites(i.sprites),this.preload&&this._beginPreload(i.loaded)}return e.from=function(t){return new e(n.default.context,t)},e.prototype.destroy=function(){this._nodes.destroy(),this._nodes=null,this._context=null,this._source=null,this.removeSprites(),this._sprites=null,this.srcBuffer=null,this._removeInstances(),this._instances=null},Object.defineProperty(e.prototype,"isPlayable",{get:function(){return this.isLoaded&&!!this._source&&!!this._source.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=this._nodes.gain.gain.value=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._source.loop},set:function(t){this._source.loop=!!t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this._source.buffer},set:function(t){this._source.buffer=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return console.assert(this.isPlayable,"Sound not yet playable, no duration"),this._source.buffer.duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodes",{get:function(){return this._nodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return this._nodes.filters},set:function(t){this._nodes.filters=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this._source.playbackRate.value},set:function(t){this._source.playbackRate.value=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instances",{get:function(){return this._instances},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sprites",{get:function(){return this._sprites},enumerable:!0,configurable:!0}),e.prototype.addSprites=function(t,e){if("object"==typeof t){var i={};for(var n in t)i[n]=this.addSprites(n,t[n]);return i}if("string"==typeof t){console.assert(!this._sprites[t],"Alias "+t+" is already taken");var s=new r.default(this,e);return this._sprites[t]=s,s}},e.prototype.removeSprites=function(t){if(t){var e=this._sprites[t];void 0!==e&&(e.destroy(),delete this._sprites[t])}else for(var i in this._sprites)this.removeSprites(i);return this},e.prototype.play=function(t,e){var i,n=this;"string"==typeof t?i={sprite:r=t,complete:e}:"function"==typeof t?(i={}).complete=t:i=t;if((i=Object.assign({complete:null,loaded:null,sprite:null,start:0,fadeIn:0,fadeOut:0},i||{})).sprite){var o=i.sprite;console.assert(!!this._sprites[o],"Alias "+o+" is not available");var r=this._sprites[o];i.start=r.start,i.end=r.end,i.speed=r.speed,delete i.sprite}if(i.offset&&(i.start=i.offset),!this.isLoaded)return new Promise(function(t,e){n.autoPlay=!0,n._autoPlayOptions=i,n._beginPreload(function(n,s,o){n?e(n):(i.loaded&&i.loaded(n,s,o),t(o))})});this.singleInstance&&this._removeInstances();var a=s.default.create(this);return this._instances.push(a),this.isPlaying=!0,a.once("end",function(){i.complete&&i.complete(n),n._onComplete(a)}),a.once("stop",function(){n._onComplete(a)}),a.play(i.start,i.end,i.speed,i.loop,i.fadeIn,i.fadeOut),a},e.prototype.stop=function(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(var t=this._instances.length-1;t>=0;t--)this._instances[t].stop();return this},e.prototype.pause=function(){for(var t=this._instances.length-1;t>=0;t--)this._instances[t].paused=!0;return this.isPlaying=!1,this},e.prototype.resume=function(){for(var t=this._instances.length-1;t>=0;t--)this._instances[t].paused=!1;return this.isPlaying=this._instances.length>0,this},e.prototype._beginPreload=function(t){this.src?this.useXHR?this._loadUrl(t):this._loadPath(t):this.srcBuffer?this._decode(this.srcBuffer,t):t?t(new Error("sound.src or sound.srcBuffer must be set")):console.error("sound.src or sound.srcBuffer must be set")},e.prototype._onComplete=function(t){if(this._instances){var e=this._instances.indexOf(t);e>-1&&this._instances.splice(e,1),this.isPlaying=this._instances.length>0}t.destroy()},e.prototype._removeInstances=function(){for(var t=this._instances.length-1;t>=0;t--)this._instances[t].destroy();this._instances.length=0},e.prototype._loadUrl=function(t){var e=this,i=new XMLHttpRequest,n=this.src;i.open("GET",n,!0),i.responseType="arraybuffer",i.onload=function(){e.srcBuffer=i.response,e._decode(i.response,t)},i.send()},e.prototype._loadPath=function(e){var i=this,n=t("fs"),s=this.src;n.readFile(s,function(t,n){if(t)return console.error(t),void(e&&e(new Error("File not found "+i.src)));for(var s=new ArrayBuffer(n.length),o=new Uint8Array(s),r=0;r<n.length;++r)o[r]=n[r];i.srcBuffer=s,i._decode(s,e)})},e.prototype._decode=function(t,e){var i=this;this._context.decode(t,function(t,n){if(t)e&&e(t);else{i.isLoaded=!0,i.buffer=n;var s=void 0;i.autoPlay&&(s=i.play(i._autoPlayOptions)),e&&e(null,i,s)}})},e}();i.default=a},{"./SoundInstance":5,"./SoundNodes":7,"./SoundSprite":8,"./index":17,fs:void 0}],4:[function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function e(){var i=this,n=new e.AudioContext,s=n.createGain(),o=n.createDynamicsCompressor(),r=n.createAnalyser();return r.connect(s),s.connect(o),o.connect(n.destination),(i=t.call(this,r,s)||this)._ctx=n,i._offlineCtx=new e.OfflineAudioContext(1,2,n.sampleRate),i._unlocked=!1,i.gain=s,i.compressor=o,i.analyser=r,i.volume=1,i.muted=!1,i.paused=!1,"ontouchstart"in window&&"running"!==n.state&&(i._unlock(),i._unlock=i._unlock.bind(i),document.addEventListener("mousedown",i._unlock,!0),document.addEventListener("touchstart",i._unlock,!0),document.addEventListener("touchend",i._unlock,!0)),i}return s(e,t),e.prototype._unlock=function(){this._unlocked||(this.playEmptySound(),"running"===this._ctx.state&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._unlocked=!0))},e.prototype.playEmptySound=function(){var t=this._ctx.createBufferSource();t.buffer=this._ctx.createBuffer(1,1,22050),t.connect(this._ctx.destination),t.start(0,0,0)},Object.defineProperty(e,"AudioContext",{get:function(){var t=window;return t.AudioContext||t.webkitAudioContext||null},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OfflineAudioContext",{get:function(){var t=window;return t.OfflineAudioContext||t.webkitOfflineAudioContext||null},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this);var e=this._ctx;void 0!==e.close&&e.close(),this.analyser.disconnect(),this.gain.disconnect(),this.compressor.disconnect(),this.gain=null,this.analyser=null,this.compressor=null,this._offlineCtx=null,this._ctx=null},Object.defineProperty(e.prototype,"audioContext",{get:function(){return this._ctx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offlineContext",{get:function(){return this._offlineCtx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=!!t,this.gain.gain.value=this._muted?0:this._volume},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this._muted||(this.gain.gain.value=this._volume)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){t&&"running"===this._ctx.state?this._ctx.suspend():t||"suspended"!==this._ctx.state||this._ctx.resume(),this._paused=t},enumerable:!0,configurable:!0}),e.prototype.toggleMute=function(){return this.muted=!this.muted,this._muted},e.prototype.decode=function(t,e){this._offlineCtx.decodeAudioData(t,function(t){e(null,t)},function(){e(new Error("Unable to decode file"))})},e}(t("./Filterable").default);i.default=o},{"./Filterable":1}],5:[function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var o=0,r=function(t){function e(e){var i=t.call(this)||this;return i.id=o++,i._parent=null,i._paused=!1,i._elapsed=0,i._init(e),i}return s(e,t),e.create=function(t){if(e._pool.length>0){var i=e._pool.pop();return i._init(t),i}return new e(t)},e.prototype.stop=function(){this._source&&(this._internalStop(),this.emit("stop"))},e.prototype.play=function(t,e,i,n,s,o){e&&console.assert(e>t,"End time is before start time"),this._paused=!1,this._source=this._parent.nodes.cloneBufferSource(),void 0!==i&&(this._source.playbackRate.value=i),this._speed=this._source.playbackRate.value,void 0!==n&&(this._loop=this._source.loop=!!n),this._loop&&void 0!==e&&(console.warn('Looping not support when specifying an "end" time'),this._loop=this._source.loop=!1),this._end=e;var r=this._source.buffer.duration;(s=this._toSec(s))>r&&(s=r),this._loop||(o=this._toSec(o))>r-s&&(o=r-s),this._duration=r,this._fadeIn=s,this._fadeOut=o,this._lastUpdate=this._now(),this._elapsed=t,this._source.onended=this._onComplete.bind(this),this._source.start(0,t,e?e-t:void 0),this.emit("start"),this._update(!0),this._enabled=!0},e.prototype._toSec=function(t){return t>10&&(t/=1e3),t||0},Object.defineProperty(e.prototype,"_enabled",{set:function(t){var e=this;this._parent.nodes.script.onaudioprocess=t?function(){e._update()}:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{get:function(){return this._progress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){t!==this._paused&&(this._paused=t,t?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play(this._elapsed%this._duration,this._end,this._speed,this._loop,this._fadeIn,this._fadeOut)),this.emit("pause",t))},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.removeAllListeners(),this._internalStop(),this._source=null,this._speed=0,this._end=0,this._parent=null,this._elapsed=0,this._duration=0,this._loop=!1,this._fadeIn=0,this._fadeOut=0,this._paused=!1,e._pool.indexOf(this)<0&&e._pool.push(this)},e.prototype.toString=function(){return"[SoundInstance id="+this.id+"]"},e.prototype._now=function(){return this._parent.context.audioContext.currentTime},e.prototype._update=function(t){if(void 0===t&&(t=!1),this._source){var e=this._now(),i=e-this._lastUpdate;if(i>0||t){this._elapsed+=i,this._lastUpdate=e;var n=this._duration,s=this._elapsed*this._speed%n/n;if(this._fadeIn||this._fadeOut){var o=s*n,r=this._parent.nodes.gain.gain,a=this._parent.volume;if(this._fadeIn&&(o<=this._fadeIn&&s<1?r.value=a*(o/this._fadeIn):(r.value=a,this._fadeIn=0)),this._fadeOut&&o>=n-this._fadeOut){var l=(n-o)/this._fadeOut;r.value=a*l}}this._progress=s,this.emit("progress",this._progress,n)}}},e.prototype._init=function(t){this._parent=t},e.prototype._internalStop=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.stop(),this._source=null,this._parent.volume=this._parent.volume)},e.prototype._onComplete=function(){this._source&&(this._enabled=!1,this._source.onended=null),this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)},e}(PIXI.utils.EventEmitter);r._pool=[],i.default=r},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Filterable"),s=t("./filters"),o=t("./Sound"),r=t("./SoundContext"),a=t("./SoundInstance"),l=t("./SoundSprite"),h=t("./SoundUtils"),c=function(){function t(){this.supported&&(this._context=new r.default),this._sounds={},this.utils=h.default,this.filters=s,this.Sound=o.default,this.SoundInstance=a.default,this.SoundLibrary=t,this.SoundSprite=l.default,this.Filterable=n.default}return Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filtersAll",{get:function(){return this._context.filters},set:function(t){this._context.filters=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supported",{get:function(){return null!==r.default.AudioContext},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e){if("object"==typeof t){var i={};for(var n in t){var s=this._getOptions(t[n],e);i[n]=this.add(n,s)}return i}if("string"==typeof t){if(console.assert(!this._sounds[t],"Sound with alias "+t+" already exists."),e instanceof o.default)return this._sounds[t]=e,e;s=this._getOptions(e);var r=new o.default(this.context,s);return this._sounds[t]=r,r}},t.prototype._getOptions=function(t,e){var i;return i="string"==typeof t?{src:t}:t instanceof ArrayBuffer?{srcBuffer:t}:t,Object.assign(i,e||{})},t.prototype.remove=function(t){return this.exists(t,!0),this._sounds[t].destroy(),delete this._sounds[t],this},Object.defineProperty(t.prototype,"volumeAll",{get:function(){return this._context.volume},set:function(t){this._context.volume=t},enumerable:!0,configurable:!0}),t.prototype.pauseAll=function(){return this._context.paused=!0,this},t.prototype.resumeAll=function(){return this._context.paused=!1,this},t.prototype.muteAll=function(){return this._context.muted=!0,this},t.prototype.unmuteAll=function(){return this._context.muted=!1,this},t.prototype.removeAll=function(){for(var t in this._sounds)this._sounds[t].destroy(),delete this._sounds[t];return this},t.prototype.stopAll=function(){for(var t in this._sounds)this._sounds[t].stop();return this},t.prototype.exists=function(t,e){void 0===e&&(e=!1);var i=!!this._sounds[t];return e&&console.assert(i,"No sound matching alias '"+t+"'."),i},t.prototype.find=function(t){return this.exists(t,!0),this._sounds[t]},t.prototype.play=function(t,e){return this.find(t).play(e)},t.prototype.stop=function(t){return this.find(t).stop()},t.prototype.pause=function(t){return this.find(t).pause()},t.prototype.resume=function(t){return this.find(t).resume()},t.prototype.volume=function(t,e){var i=this.find(t);return void 0!==e&&(i.volume=e),i.volume},t.prototype.duration=function(t){return this.find(t).duration},t.prototype.destroy=function(){this.removeAll(),this._sounds=null,this._context=null},t}();i.default=c},{"./Filterable":1,"./Sound":3,"./SoundContext":4,"./SoundInstance":5,"./SoundSprite":8,"./SoundUtils":9,"./filters":16}],7:[function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){function e(i){var n=this,s=i.audioContext,o=s.createBufferSource(),r=s.createScriptProcessor(e.BUFFER_SIZE),a=s.createGain(),l=s.createAnalyser();return o.connect(l),l.connect(a),a.connect(i.destination),r.connect(i.destination),(n=t.call(this,l,a)||this).context=i,n.bufferSource=o,n.script=r,n.gain=a,n.analyser=l,n}return s(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.bufferSource.disconnect(),this.script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this.script=null,this.gain=null,this.analyser=null,this.context=null},e.prototype.cloneBufferSource=function(){var t=this.bufferSource,e=this.context.audioContext.createBufferSource();return e.buffer=t.buffer,e.playbackRate.value=t.playbackRate.value,e.loop=t.loop,e.connect(this.destination),e},e}(t("./Filterable").default);o.BUFFER_SIZE=256,i.default=o},{"./Filterable":1}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){this.parent=t,Object.assign(this,e),this.duration=this.end-this.start,console.assert(this.duration>0,"End time must be after start time")}return t.prototype.play=function(t){return this.parent.play(Object.assign({complete:t,speed:this.speed||this.parent.speed,end:this.end,start:this.start}))},t.prototype.destroy=function(){this.parent=null},t}();i.default=n},{}],9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("uuid/v4"),s=t("./index"),o=t("./Sound"),r=function(){function t(){}return t.sineTone=function(t,e){void 0===t&&(t=200),void 0===e&&(e=1);for(var i=s.default.context,n=new o.default(i,{singleInstance:!0}),r=i.audioContext.createBuffer(1,48e3*e,48e3),a=r.getChannelData(0),l=0;l<a.length;l++){var h=t*(l/r.sampleRate)*Math.PI;a[l]=2*Math.sin(h)}return n.buffer=r,n.isLoaded=!0,n},t.render=function(t,e){e=Object.assign({width:512,height:128,fill:"black"},e||{}),console.assert(!!t.buffer,"No buffer found, load first");var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var n=i.getContext("2d");n.fillStyle=e.fill;for(var s=t.buffer.getChannelData(0),o=Math.ceil(s.length/e.width),r=e.height/2,a=0;a<e.width;a++){for(var l=1,h=-1,c=0;c<o;c++){var u=s[a*o+c];u<l&&(l=u),u>h&&(h=u)}n.fillRect(a,(1+l)*r,1,Math.max(1,(h-l)*r))}return PIXI.BaseTexture.fromCanvas(i)},t.playOnce=function(t,e){var i=n();return s.default.add(i,{src:t,preload:!0,autoPlay:!0,loaded:function(t){t&&(console.error(t),s.default.remove(i),e&&e(t))},complete:function(){s.default.remove(i),e&&e(null)}}),i},t}();i.default=r},{"./Sound":3,"./index":17,"uuid/v4":20}],10:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Sound"),s=t("./SoundLibrary").default.prototype,o=n.default.prototype;s.sound=function(t){return console.warn("PIXI.sound.sound is deprecated, use PIXI.sound.find"),this.find(t)},s.panning=function(t,e){return console.warn("PIXI.sound.panning is deprecated, use PIXI.sound.filters.StereoPan"),0},s.addMap=function(t,e){return console.warn("PIXI.sound.addMap is deprecated, use PIXI.sound.add"),this.add(t,e)},Object.defineProperty(s,"SoundUtils",{get:function(){return console.warn("PIXI.sound.SoundUtils is deprecated, use PIXI.sound.utils"),this.utils}}),Object.defineProperty(o,"block",{get:function(){return console.warn("PIXI.sound.Sound.prototype.block is deprecated, use singleInstance instead"),this.singleInstance},set:function(t){console.warn("PIXI.sound.Sound.prototype.block is deprecated, use singleInstance instead"),this.singleInstance=t}}),Object.defineProperty(o,"loaded",{get:function(){return console.warn("PIXI.sound.Sound.prototype.loaded is deprecated, use constructor option instead"),null},set:function(t){console.warn("PIXI.sound.Sound.prototype.loaded is deprecated, use constructor option instead")}}),Object.defineProperty(o,"complete",{get:function(){return console.warn("PIXI.sound.Sound.prototype.complete is deprecated, use constructor option instead"),null},set:function(t){console.warn("PIXI.sound.Sound.prototype.complete is deprecated, use constructor option instead")}})},{"./Sound":3,"./SoundLibrary":6}],11:[function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var o=t("./Filter"),r=t("../index"),a=function(t){function e(e){void 0===e&&(e=0);var i=this,n=r.default.context.audioContext.createWaveShaper();return(i=t.call(this,n)||this)._distortion=n,i.amount=e,i}return s(e,t),Object.defineProperty(e.prototype,"amount",{get:function(){return this._amount},set:function(t){t*=1e3,this._amount=t;for(var e,i=new Float32Array(44100),n=Math.PI/180,s=0;s<44100;++s)e=2*s/44100-1,i[s]=(3+t)*e*20*n/(Math.PI+t*Math.abs(e));this._distortion.curve=i,this._distortion.oversample="4x"},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._distortion=null,t.prototype.destroy.call(this)},e}(o.default);i.default=a},{"../index":17,"./Filter":13}],12:[function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var o=t("./Filter"),r=t("../index"),a=function(t){function e(i,n,s,o,a,l,h,c,u,p){void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===l&&(l=0),void 0===h&&(h=0),void 0===c&&(c=0),void 0===u&&(u=0),void 0===p&&(p=0);var d=this,f=[{f:e.F32,type:"lowshelf",gain:i},{f:e.F64,type:"peaking",gain:n},{f:e.F125,type:"peaking",gain:s},{f:e.F250,type:"peaking",gain:o},{f:e.F500,type:"peaking",gain:a},{f:e.F1K,type:"peaking",gain:l},{f:e.F2K,type:"peaking",gain:h},{f:e.F4K,type:"peaking",gain:c},{f:e.F8K,type:"peaking",gain:u},{f:e.F16K,type:"highshelf",gain:p}].map(function(t){var e=r.default.context.audioContext.createBiquadFilter();return e.type=t.type,e.gain.value=t.gain,e.Q.value=1,e.frequency.value=t.f,e});(d=t.call(this,f[0],f[f.length-1])||this).bands=f,d.bandsMap={};for(var _=0;_<d.bands.length;_++){var y=d.bands[_];_>0&&d.bands[_-1].connect(y),d.bandsMap[y.frequency.value]=y}return d}return s(e,t),e.prototype.setGain=function(t,e){if(void 0===e&&(e=0),!this.bandsMap[t])throw"No band found for frequency "+t;this.bandsMap[t].gain.value=e},e.prototype.reset=function(){this.bands.forEach(function(t){t.gain.value=0})},e.prototype.destroy=function(){this.bands.forEach(function(t){t.disconnect()}),this.bands=null,this.bandsMap=null},e}(o.default);a.F32=32,a.F64=64,a.F125=125,a.F250=250,a.F500=500,a.F1K=1e3,a.F2K=2e3,a.F4K=4e3,a.F8K=8e3,a.F16K=16e3,i.default=a},{"../index":17,"./Filter":13}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){this.destination=t,this.source=e||t}return t.prototype.connect=function(t){this.source.connect(t)},t.prototype.disconnect=function(){this.source.disconnect()},t.prototype.destroy=function(){this.disconnect(),this.destination=null,this.source=null},t}();i.default=n},{}],14:[function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var o=t("./Filter"),r=t("../index"),a=function(t){function e(e,i,n){void 0===e&&(e=3),void 0===i&&(i=2),void 0===n&&(n=!1);var s=this,o=r.default.context.audioContext.createConvolver();return(s=t.call(this,o)||this)._convolver=o,s._seconds=s._clamp(e,1,50),s._decay=s._clamp(i,0,100),s._reverse=n,s._rebuild(),s}return s(e,t),e.prototype._clamp=function(t,e,i){return Math.min(i,Math.max(e,t))},Object.defineProperty(e.prototype,"seconds",{get:function(){return this._seconds},set:function(t){this._seconds=this._clamp(t,1,50),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"decay",{get:function(){return this._decay},set:function(t){this._decay=this._clamp(t,0,100),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this._reverse},set:function(t){this._reverse=t,this._rebuild()},enumerable:!0,configurable:!0}),e.prototype._rebuild=function(){for(var t,e=r.default.context.audioContext,i=e.sampleRate,n=i*this._seconds,s=e.createBuffer(2,n,i),o=s.getChannelData(0),a=s.getChannelData(1),l=0;l<n;l++)t=this._reverse?n-l:l,o[l]=(2*Math.random()-1)*Math.pow(1-t/n,this._decay),a[l]=(2*Math.random()-1)*Math.pow(1-t/n,this._decay);this._convolver.buffer=s},e.prototype.destroy=function(){this._convolver=null,t.prototype.destroy.call(this)},e}(o.default);i.default=a},{"../index":17,"./Filter":13}],15:[function(t,e,i){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var o=t("./Filter"),r=t("../index"),a=function(t){function e(e){void 0===e&&(e=0);var i,n,s,o=this,a=r.default.context.audioContext;return a.createStereoPanner?s=i=a.createStereoPanner():((n=a.createPanner()).panningModel="equalpower",s=n),(o=t.call(this,s)||this)._stereo=i,o._panner=n,o.pan=e,o}return s(e,t),Object.defineProperty(e.prototype,"pan",{get:function(){return this._pan},set:function(t){this._pan=t,this._stereo?this._stereo.pan.value=t:this._panner.setPosition(t,0,1-Math.abs(t))},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this._stereo=null,this._panner=null},e}(o.default);i.default=a},{"../index":17,"./Filter":13}],16:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Filter");i.Filter=n.default;var s=t("./EqualizerFilter");i.EqualizerFilter=s.default;var o=t("./DistortionFilter");i.DistortionFilter=o.default;var r=t("./StereoFilter");i.StereoFilter=r.default;var a=t("./ReverbFilter");i.ReverbFilter=a.default},{"./DistortionFilter":11,"./EqualizerFilter":12,"./Filter":13,"./ReverbFilter":14,"./StereoFilter":15}],17:[function(t,e,i){(function(e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./LoaderMiddleware"),s=t("./SoundLibrary");t("./deprecations");var o=new s.default;if(void 0===e.PIXI)throw new Error("pixi.js is required");void 0!==PIXI.loaders&&n.install(),Object.defineProperty(PIXI,"sound",{get:function(){return o}}),i.default=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./LoaderMiddleware":2,"./SoundLibrary":6,"./deprecations":10}],18:[function(t,e,i){for(var n=[],s=0;s<256;++s)n[s]=(s+256).toString(16).substr(1);e.exports=function(t,e){var i=e||0,s=n;return s[t[i++]]+s[t[i++]]+s[t[i++]]+s[t[i++]]+"-"+s[t[i++]]+s[t[i++]]+"-"+s[t[i++]]+s[t[i++]]+"-"+s[t[i++]]+s[t[i++]]+"-"+s[t[i++]]+s[t[i++]]+s[t[i++]]+s[t[i++]]+s[t[i++]]+s[t[i++]]}},{}],19:[function(t,e,i){(function(t){var i,n=t.crypto||t.msCrypto;if(n&&n.getRandomValues){var s=new Uint8Array(16);i=function(){return n.getRandomValues(s),s}}if(!i){var o=new Array(16);i=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(t,e,i){var n=t("./lib/rng"),s=t("./lib/bytesToUuid");e.exports=function(t,e,i){var o=e&&i||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||n)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e)for(var a=0;a<16;++a)e[o+a]=r[a];return e||s(r)}},{"./lib/bytesToUuid":18,"./lib/rng":19}]},{},[17])(17)}),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pixiParticles=t()}}(function(){var define,module,exports;return function t(e,i,n){function s(r,a){if(!i[r]){if(!e[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(o)return o(r,!0);var h=new Error("Cannot find module '"+r+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[r]={exports:{}};e[r][0].call(c.exports,function(t){var i=e[r][1][t];return s(i||t)},c,c.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(t,e,i){"use strict";var n=t("./ParticleUtils"),s=t("./Particle"),o=PIXI.Texture,r=function(t){s.call(this,t),this.textures=null,this.duration=0,this.framerate=0,this.elapsed=0,this.loop=!1},a=s.prototype,l=r.prototype=Object.create(a);l.init=function(){this.Particle_init(),this.elapsed=0,this.framerate<0&&(this.duration=this.maxLife,this.framerate=this.textures.length/this.duration)},l.applyArt=function(t){this.textures=t.textures,this.framerate=t.framerate,this.duration=t.duration,this.loop=t.loop},l.update=function(t){if(this.Particle_update(t)>=0){this.elapsed+=t,this.elapsed>this.duration&&(this.loop?this.elapsed=this.elapsed%this.duration:this.elapsed=this.duration-1e-6);var e=this.elapsed*this.framerate+1e-7|0;this.texture=this.textures[e]||n.EMPTY_TEXTURE}},l.Particle_destroy=s.prototype.destroy,l.destroy=function(){this.Particle_destroy(),this.textures=null},r.parseArt=function(t){var e,i,n,s,r,a,l=[];for(e=0;e<t.length;++e){for(i=t[e],t[e]=l={},l.textures=a=[],s=i.textures,n=0;n<s.length;++n)if("string"==typeof(r=s[n]))a.push(o.fromImage(r));else if(r instanceof o)a.push(r);else{var h=r.count||1;for(r="string"==typeof r.texture?o.fromImage(r.texture):r.texture;h>0;--h)a.push(r)}"matchLife"==i.framerate?(l.framerate=-1,l.duration=0,l.loop=!1):(l.loop=!!i.loop,l.framerate=i.framerate>0?i.framerate:60,l.duration=a.length/l.framerate)}return t},e.exports=r},{"./Particle":3,"./ParticleUtils":4}],2:[function(t,e,i){"use strict";var n=t("./ParticleUtils"),s=t("./Particle"),o=PIXI.particles.ParticleContainer||PIXI.ParticleContainer,r=PIXI.ticker.shared,a=function(t,e,i){this._particleConstructor=s,this.particleImages=null,this.startAlpha=1,this.endAlpha=1,this.startSpeed=0,this.endSpeed=0,this.minimumSpeedMultiplier=1,this.acceleration=null,this.maxSpeed=NaN,this.startScale=1,this.endScale=1,this.minimumScaleMultiplier=1,this.startColor=null,this.endColor=null,this.minLifetime=0,this.maxLifetime=0,this.minStartRotation=0,this.maxStartRotation=0,this.noRotation=!1,this.minRotationSpeed=0,this.maxRotationSpeed=0,this.particleBlendMode=0,this.customEase=null,this.extraData=null,this._frequency=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=null,this.spawnType=null,this._spawnFunc=null,this.spawnRect=null,this.spawnCircle=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0,this.rotation=0,this.ownerPos=null,this._prevEmitterPos=null,this._prevPosIsValid=!1,this._posChanged=!1,this._parentIsPC=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._origArt=null,this._autoUpdate=!1,this._destroyWhenComplete=!1,this.parent=t,e&&i&&this.init(e,i),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos},l=a.prototype={},h=new PIXI.Point;Object.defineProperty(l,"frequency",{get:function(){return this._frequency},set:function(t){this._frequency="number"==typeof t&&t>0?t:1}}),Object.defineProperty(l,"particleConstructor",{get:function(){return this._particleConstructor},set:function(t){if(t!=this._particleConstructor){this._particleConstructor=t,this.cleanup();for(var e=this._poolFirst;e;e=e.next)e.destroy();this._poolFirst=null,this._origConfig&&this._origArt&&this.init(this._origArt,this._origConfig)}}}),Object.defineProperty(l,"parent",{get:function(){return this._parent},set:function(t){if(this._parentIsPC)for(var e=this._poolFirst;e;e=e.next)e.parent&&e.parent.removeChild(e);this.cleanup(),this._parent=t,this._parentIsPC=o&&t&&t instanceof o}}),l.init=function(t,e){if(t&&e){this.cleanup(),this._origConfig=e,this._origArt=t,t=Array.isArray(t)?t.slice():[t];var i=this._particleConstructor;this.particleImages=i.parseArt?i.parseArt(t):t,e.alpha?(this.startAlpha=e.alpha.start,this.endAlpha=e.alpha.end):this.startAlpha=this.endAlpha=1,e.speed?(this.startSpeed=e.speed.start,this.endSpeed=e.speed.end,this.minimumSpeedMultiplier=e.speed.minimumSpeedMultiplier||1):(this.minimumSpeedMultiplier=1,this.startSpeed=this.endSpeed=0);var s,o=e.acceleration;switch(o&&(o.x||o.y)?(this.endSpeed=this.startSpeed,this.acceleration=new PIXI.Point(o.x,o.y),this.maxSpeed=e.maxSpeed||NaN):this.acceleration=new PIXI.Point,e.scale?(this.startScale=e.scale.start,this.endScale=e.scale.end,this.minimumScaleMultiplier=e.scale.minimumScaleMultiplier||1):this.startScale=this.endScale=this.minimumScaleMultiplier=1,e.color&&(this.startColor=n.hexToRGB(e.color.start),e.color.start!=e.color.end?this.endColor=n.hexToRGB(e.color.end):this.endColor=null),e.startRotation?(this.minStartRotation=e.startRotation.min,this.maxStartRotation=e.startRotation.max):this.minStartRotation=this.maxStartRotation=0,e.noRotation&&(this.minStartRotation||this.maxStartRotation)?this.noRotation=!!e.noRotation:this.noRotation=!1,e.rotationSpeed?(this.minRotationSpeed=e.rotationSpeed.min,this.maxRotationSpeed=e.rotationSpeed.max):this.minRotationSpeed=this.maxRotationSpeed=0,this.minLifetime=e.lifetime.min,this.maxLifetime=e.lifetime.max,this.particleBlendMode=n.getBlendMode(e.blendMode),e.ease?this.customEase="function"==typeof e.ease?e.ease:n.generateEase(e.ease):this.customEase=null,i.parseData?this.extraData=i.parseData(e.extraData):this.extraData=e.extraData||null,this.spawnRect=this.spawnCircle=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0,e.spawnType){case"rect":this.spawnType="rect",this._spawnFunc=this._spawnRect;var r=e.spawnRect;this.spawnRect=new PIXI.Rectangle(r.x,r.y,r.w,r.h);break;case"circle":this.spawnType="circle",this._spawnFunc=this._spawnCircle,s=e.spawnCircle,this.spawnCircle=new PIXI.Circle(s.x,s.y,s.r);break;case"ring":this.spawnType="ring",this._spawnFunc=this._spawnRing,s=e.spawnCircle,this.spawnCircle=new PIXI.Circle(s.x,s.y,s.r),this.spawnCircle.minRadius=s.minR;break;case"burst":this.spawnType="burst",this._spawnFunc=this._spawnBurst,this.particlesPerWave=e.particlesPerWave,this.particleSpacing=e.particleSpacing,this.angleStart=e.angleStart?e.angleStart:0;break;case"point":default:this.spawnType="point",this._spawnFunc=this._spawnPoint}this.frequency=e.frequency,this.emitterLifetime=e.emitterLifetime||-1,this.maxParticles=e.maxParticles>0?e.maxParticles:1e3,this.addAtBack=!!e.addAtBack,this.rotation=0,this.ownerPos=new PIXI.Point,this.spawnPos=new PIXI.Point(e.pos.x,e.pos.y),this._prevEmitterPos=this.spawnPos.clone(),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=void 0===e.emit||!!e.emit,this.autoUpdate=void 0!==e.autoUpdate&&!!e.autoUpdate}},l.recycle=function(t){t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t==this._activeParticlesLast&&(this._activeParticlesLast=t.prev),t==this._activeParticlesFirst&&(this._activeParticlesFirst=t.next),t.prev=null,t.next=this._poolFirst,this._poolFirst=t,this._parentIsPC?(t.alpha=0,t.visible=!1):t.parent&&t.parent.removeChild(t),--this.particleCount},l.rotate=function(t){if(this.rotation!=t){var e=t-this.rotation;this.rotation=t,n.rotatePoint(e,this.spawnPos),this._posChanged=!0}},l.updateSpawnPos=function(t,e){this._posChanged=!0,this.spawnPos.x=t,this.spawnPos.y=e},l.updateOwnerPos=function(t,e){this._posChanged=!0,this.ownerPos.x=t,this.ownerPos.y=e},l.resetPositionTracking=function(){this._prevPosIsValid=!1},Object.defineProperty(l,"emit",{get:function(){return this._emit},set:function(t){this._emit=!!t,this._emitterLife=this.emitterLifetime}}),Object.defineProperty(l,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){this._autoUpdate&&!t?r.remove(this.update,this):!this._autoUpdate&&t&&r.add(this.update,this),this._autoUpdate=!!t}}),l.playOnceAndDestroy=function(){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0},l.update=function(t){if(this._autoUpdate&&(t=t/PIXI.settings.TARGET_FPMS/1e3),this._parent){var e,i,n,s,o;for(i=this._activeParticlesFirst;i;i=n)n=i.next,i.update(t);this._prevPosIsValid&&(s=this._prevEmitterPos.x,o=this._prevEmitterPos.y);var r=this.ownerPos.x+this.spawnPos.x,a=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=t;this._spawnTimer<=0;){if(this._emitterLife>0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles)this._spawnTimer+=this._frequency;else{var l;if(l=this.minLifetime==this.maxLifetime?this.minLifetime:Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer<l){var h,c;if(this._prevPosIsValid&&this._posChanged){var u=1+this._spawnTimer/t;h=(r-s)*u+s,c=(a-o)*u+o}else h=r,c=a;e=0;for(var p=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount);e<p;++e){var d,f;if(this._poolFirst?(d=this._poolFirst,this._poolFirst=this._poolFirst.next,d.next=null):d=new this.particleConstructor(this),this.particleImages.length>1?d.applyArt(this.particleImages.random()):d.applyArt(this.particleImages[0]),d.startAlpha=this.startAlpha,d.endAlpha=this.endAlpha,1!=this.minimumSpeedMultiplier?(f=Math.random()*(1-this.minimumSpeedMultiplier)+this.minimumSpeedMultiplier,d.startSpeed=this.startSpeed*f,d.endSpeed=this.endSpeed*f):(d.startSpeed=this.startSpeed,d.endSpeed=this.endSpeed),d.acceleration.x=this.acceleration.x,d.acceleration.y=this.acceleration.y,d.maxSpeed=this.maxSpeed,1!=this.minimumScaleMultiplier?(f=Math.random()*(1-this.minimumScaleMultiplier)+this.minimumScaleMultiplier,d.startScale=this.startScale*f,d.endScale=this.endScale*f):(d.startScale=this.startScale,d.endScale=this.endScale),d.startColor=this.startColor,d.endColor=this.endColor,this.minRotationSpeed==this.maxRotationSpeed?d.rotationSpeed=this.minRotationSpeed:d.rotationSpeed=Math.random()*(this.maxRotationSpeed-this.minRotationSpeed)+this.minRotationSpeed,d.noRotation=this.noRotation,d.maxLife=l,d.blendMode=this.particleBlendMode,d.ease=this.customEase,d.extraData=this.extraData,this._spawnFunc(d,h,c,e),d.init(),d.update(-this._spawnTimer),this._parentIsPC&&d.parent){var _=this._parent.children;if(_[0]==d)_.shift();else if(_[_.length-1]==d)_.pop();else{var y=_.indexOf(d);_.splice(y,1)}this.addAtBack?_.unshift(d):_.push(d)}else this.addAtBack?this._parent.addChildAt(d,0):this._parent.addChild(d);this._activeParticlesLast?(this._activeParticlesLast.next=d,d.prev=this._activeParticlesLast,this._activeParticlesLast=d):this._activeParticlesLast=this._activeParticlesFirst=d,++this.particleCount}}this._spawnTimer+=this._frequency}}this._posChanged&&(this._prevEmitterPos.x=r,this._prevEmitterPos.y=a,this._prevPosIsValid=!0,this._posChanged=!1),!this._destroyWhenComplete||this._emit||this._activeParticlesFirst||this.destroy()}},l._spawnPoint=function(t,e,i){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,t.position.x=e,t.position.y=i},l._spawnRect=function(t,e,i){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,h.x=Math.random()*this.spawnRect.width+this.spawnRect.x,h.y=Math.random()*this.spawnRect.height+this.spawnRect.y,0!==this.rotation&&n.rotatePoint(this.rotation,h),t.position.x=e+h.x,t.position.y=i+h.y},l._spawnCircle=function(t,e,i){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,h.x=Math.random()*this.spawnCircle.radius,h.y=0,n.rotatePoint(360*Math.random(),h),h.x+=this.spawnCircle.x,h.y+=this.spawnCircle.y,0!==this.rotation&&n.rotatePoint(this.rotation,h),t.position.x=e+h.x,t.position.y=i+h.y},l._spawnRing=function(t,e,i){var s=this.spawnCircle;this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,s.minRadius==s.radius?h.x=Math.random()*(s.radius-s.minRadius)+s.minRadius:h.x=s.radius,h.y=0;var o=360*Math.random();t.rotation+=o,n.rotatePoint(o,h),h.x+=this.spawnCircle.x,h.y+=this.spawnCircle.y,0!==this.rotation&&n.rotatePoint(this.rotation,h),t.position.x=e+h.x,t.position.y=i+h.y},l._spawnBurst=function(t,e,i,n){0===this.particleSpacing?t.rotation=360*Math.random():t.rotation=this.angleStart+this.particleSpacing*n+this.rotation,t.position.x=e,t.position.y=i},l.cleanup=function(){var t,e;for(t=this._activeParticlesFirst;t;t=e)e=t.next,this.recycle(t),t.parent&&t.parent.removeChild(t);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0},l.destroy=function(){var t;this.autoUpdate=!1,this.cleanup();for(var e=this._poolFirst;e;e=t)t=e.next,e.destroy();this._poolFirst=this._parent=this.particleImages=this.spawnPos=this.ownerPos=this.startColor=this.endColor=this.customEase=null},e.exports=a},{"./Particle":3,"./ParticleUtils":4}],3:[function(t,e,i){var n=t("./ParticleUtils"),s=PIXI.Sprite,o=function(t){s.call(this),this.emitter=t,this.anchor.x=this.anchor.y=.5,this.velocity=new PIXI.Point,this.maxLife=0,this.age=0,this.ease=null,this.extraData=null,this.startAlpha=0,this.endAlpha=0,this.startSpeed=0,this.endSpeed=0,this.acceleration=new PIXI.Point,this.maxSpeed=NaN,this.startScale=0,this.endScale=0,this.startColor=null,this._sR=0,this._sG=0,this._sB=0,this.endColor=null,this._eR=0,this._eG=0,this._eB=0,this._doAlpha=!1,this._doScale=!1,this._doSpeed=!1,this._doAcceleration=!1,this._doColor=!1,this._doNormalMovement=!1,this._oneOverLife=0,this.next=null,this.prev=null,this.init=this.init,this.Particle_init=this.Particle_init,this.update=this.update,this.Particle_update=this.Particle_update,this.applyArt=this.applyArt,this.kill=this.kill},r=o.prototype=Object.create(s.prototype);r.init=r.Particle_init=function(){this.age=0,this.velocity.x=this.startSpeed,this.velocity.y=0,n.rotatePoint(this.rotation,this.velocity),this.noRotation?this.rotation=0:this.rotation*=n.DEG_TO_RADS,this.rotationSpeed*=n.DEG_TO_RADS,this.alpha=this.startAlpha,this.scale.x=this.scale.y=this.startScale,this.startColor&&(this._sR=this.startColor[0],this._sG=this.startColor[1],this._sB=this.startColor[2],this.endColor&&(this._eR=this.endColor[0],this._eG=this.endColor[1],this._eB=this.endColor[2])),this._doAlpha=this.startAlpha!=this.endAlpha,this._doSpeed=this.startSpeed!=this.endSpeed,this._doScale=this.startScale!=this.endScale,this._doColor=!!this.endColor,this._doAcceleration=0!==this.acceleration.x||0!==this.acceleration.y,this._doNormalMovement=this._doSpeed||0!==this.startSpeed||this._doAcceleration,this._oneOverLife=1/this.maxLife,this.tint=n.combineRGBComponents(this._sR,this._sG,this._sB),this.visible=!0},r.applyArt=function(t){this.texture=t||n.EMPTY_TEXTURE},r.update=r.Particle_update=function(t){if(this.age+=t,this.age>=this.maxLife)return this.kill(),-1;var e=this.age*this._oneOverLife;if(this.ease&&(e=4==this.ease.length?this.ease(e,0,1,1):this.ease(e)),this._doAlpha&&(this.alpha=(this.endAlpha-this.startAlpha)*e+this.startAlpha),this._doScale){var i=(this.endScale-this.startScale)*e+this.startScale;this.scale.x=this.scale.y=i}if(this._doNormalMovement){if(this._doSpeed){var s=(this.endSpeed-this.startSpeed)*e+this.startSpeed;n.normalize(this.velocity),n.scaleBy(this.velocity,s)}else if(this._doAcceleration&&(this.velocity.x+=this.acceleration.x*t,this.velocity.y+=this.acceleration.y*t,this.maxSpeed)){var o=n.length(this.velocity);o>this.maxSpeed&&n.scaleBy(this.velocity,this.maxSpeed/o)}this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t}if(this._doColor){var r=(this._eR-this._sR)*e+this._sR,a=(this._eG-this._sG)*e+this._sG,l=(this._eB-this._sB)*e+this._sB;this.tint=n.combineRGBComponents(r,a,l)}return 0!==this.rotationSpeed?this.rotation+=this.rotationSpeed*t:this.acceleration&&!this.noRotation&&(this.rotation=Math.atan2(this.velocity.y,this.velocity.x)),e},r.kill=function(){this.emitter.recycle(this)},r.Sprite_Destroy=s.prototype.destroy,r.destroy=function(){this.parent&&this.parent.removeChild(this),this.Sprite_Destroy&&this.Sprite_Destroy(),this.emitter=this.velocity=this.startColor=this.endColor=this.ease=this.next=this.prev=null},o.parseArt=function(t){var e;for(e=t.length;e>=0;--e)"string"==typeof t[e]&&(t[e]=PIXI.Texture.fromImage(t[e]));if(n.verbose)for(e=t.length-1;e>0;--e)if(t[e].baseTexture!=t[e-1].baseTexture){window.console&&console.warn("PixiParticles: using particle textures from different images may hinder performance in WebGL");break}return t},o.parseData=function(t){return t},e.exports=o},{"./ParticleUtils":4}],4:[function(t,e,i){"use strict";var n=PIXI.BLEND_MODES||PIXI.blendModes,s=PIXI.Texture,o={verbose:!1},r=o.DEG_TO_RADS=Math.PI/180,a=o.EMPTY_TEXTURE=s.EMPTY;a.on=a.destroy=a.once=a.emit=function(){},o.rotatePoint=function(t,e){if(t){t*=r;var i=Math.sin(t),n=Math.cos(t),s=e.x*n-e.y*i,o=e.x*i+e.y*n;e.x=s,e.y=o}},o.combineRGBComponents=function(t,e,i){return t<<16|e<<8|i},o.normalize=function(t){var e=1/o.length(t);t.x*=e,t.y*=e},o.scaleBy=function(t,e){t.x*=e,t.y*=e},o.length=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},o.hexToRGB=function(t,e){var i;return e?e.length=0:e=[],"#"==t.charAt(0)?t=t.substr(1):0===t.indexOf("0x")&&(t=t.substr(2)),8==t.length&&(i=t.substr(0,2),t=t.substr(2)),e.push(parseInt(t.substr(0,2),16)),e.push(parseInt(t.substr(2,2),16)),e.push(parseInt(t.substr(4,2),16)),i&&e.push(parseInt(i,16)),e},o.generateEase=function(t){var e=t.length,i=1/e;return function(n){var s,o,r=e*n|0;return s=(n-r*i)*e,(o=t[r]||t[e-1]).s+s*(2*(1-s)*(o.cp-o.s)+s*(o.e-o.s))}},o.getBlendMode=function(t){if(!t)return n.NORMAL;for(t=t.toUpperCase();t.indexOf(" ")>=0;)t=t.replace(" ","_");return n[t]||n.NORMAL},e.exports=o},{}],5:[function(require,module,exports){"use strict";var ParticleUtils=require("./ParticleUtils"),Particle=require("./Particle"),PathParticle=function(t){Particle.call(this,t),this.path=null,this.initialRotation=0,this.initialPosition=new PIXI.Point,this.movement=0},s=Particle.prototype,p=PathParticle.prototype=Object.create(s),helperPoint=new PIXI.Point;p.init=function(){this.initialRotation=this.rotation,this.Particle_init(),this.path=this.extraData.path,this._doNormalMovement=!this.path,this.movement=0,this.initialPosition.x=this.position.x,this.initialPosition.y=this.position.y};for(var MATH_FUNCS=["pow","sqrt","abs","floor","round","ceil","E","PI","sin","cos","tan","asin","acos","atan","atan2","log"],WHITELISTER="[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]",index=MATH_FUNCS.length-1;index>=0;--index)WHITELISTER+="|"+MATH_FUNCS[index];WHITELISTER=new RegExp(WHITELISTER,"g");var parsePath=function(pathString){for(var rtn,matches=pathString.match(WHITELISTER),i=matches.length-1;i>=0;--i)MATH_FUNCS.indexOf(matches[i])>=0&&(matches[i]="Math."+matches[i]);return pathString=matches.join(""),eval("rtn = function(x){ return "+pathString+"; };"),rtn};p.update=function(t){var e=this.Particle_update(t);if(e>=0&&this.path){var i=(this.endSpeed-this.startSpeed)*e+this.startSpeed;this.movement+=i*t,helperPoint.x=this.movement,helperPoint.y=this.path(this.movement),ParticleUtils.rotatePoint(this.initialRotation,helperPoint),this.position.x=this.initialPosition.x+helperPoint.x,this.position.y=this.initialPosition.y+helperPoint.y}},p.Particle_destroy=Particle.prototype.destroy,p.destroy=function(){this.Particle_destroy(),this.path=this.initialPosition=null},PathParticle.parseArt=function(t){return Particle.parseArt(t)},PathParticle.parseData=function(t){var e={};if(t&&t.path)try{e.path=parsePath(t.path)}catch(t){ParticleUtils.verbose&&console.error("PathParticle: error in parsing path expression"),e.path=null}else ParticleUtils.verbose&&console.error("PathParticle requires a path string in extraData!"),e.path=null;return e},module.exports=PathParticle},{"./Particle":3,"./ParticleUtils":4}],6:[function(t,e,i){},{}],7:[function(t,e,i){t("./polyfills.js"),i.ParticleUtils=t("./ParticleUtils.js"),i.Particle=t("./Particle.js"),i.Emitter=t("./Emitter.js"),i.PathParticle=t("./PathParticle.js"),i.AnimatedParticle=t("./AnimatedParticle.js"),t("./deprecation.js")},{"./AnimatedParticle.js":1,"./Emitter.js":2,"./Particle.js":3,"./ParticleUtils.js":4,"./PathParticle.js":5,"./deprecation.js":6,"./polyfills.js":8}],8:[function(t,e,i){Array.prototype.shuffle||Object.defineProperty(Array.prototype,"shuffle",{enumerable:!1,writable:!1,value:function(){for(var t,e,i=this.length;i;t=Math.floor(Math.random()*i),e=this[--i],this[i]=this[t],this[t]=e);return this}}),Array.prototype.random||Object.defineProperty(Array.prototype,"random",{enumerable:!1,writable:!1,value:function(){return this[Math.floor(Math.random()*this.length)]}})},{}],9:[function(t,e,i){"use strict";var n="undefined"!=typeof window?window:GLOBAL;if(n.PIXI.particles||(n.PIXI.particles={}),void 0!==e&&e.exports)"undefined"==typeof PIXI&&t("pixi.js"),e.exports=n.PIXI.particles||s;else if("undefined"==typeof PIXI)throw"pixi-particles requires pixi.js to be loaded first";var s=t("./particles");for(var o in s)n.PIXI.particles[o]=s[o]},{"./particles":7,"pixi.js":void 0}]},{},[9])(9)});var GAME=GAME||{},view,stage,renderer,gameScene,assetsManager,logo,stats,winWidth,winHeight;function resizeCanvas(){winWidth=$(window).get(0).innerWidth||document.documentElement.clientWidth||document.body.clientWidth,(winHeight=$(window).get(0).innerHeight||document.documentElement.clientHeight||document.body.clientHeight)>winWidth&&!view&&$("html,body").scrollLeft(0)}function initStatsBar(){stats=new Stats,document.body.appendChild(stats.domElement)}function init(){GAME.stageWidth=640,GAME.stageHeight=640*winHeight/winWidth,(view=document.getElementById("pixi_view")).style.width=winWidth+"px",view.style.height=winHeight+"px",renderer=new PIXI.Application({width:GAME.stageWidth,height:GAME.stageHeight,view:view,transparent:!0}),stage=new PIXI.Container,renderer.stage.addChild(stage),GAME.renderer=renderer,GAME.canvas=view,GAME.stage=stage,(assetsManager=new GAME.AssetsManager).onComplete=function(){TweenMax.to(document.getElementById("loading"),1,{css:{alpha:0}}),TweenMax.delayedCall(1,function(){$("#loading").hide()}),initScene()},assetsManager.start(),animate()}function initScene(){var t=PIXI.Sprite.fromFrame("logo2.png");stage.addChild(t),initScene1(),PIXI.sound.play("bg",{loop:!0})}function initScene1(){PIXI.sound.play("s1"),gameScene=new GAME.GameScene1,stage.addChild(gameScene),gameScene.init(),gameScene.sceneIn(),gameScene.addEventListener("SCENE_OUT_COMPLETE",function(t){stage.removeChild(gameScene),gameScene=null,initScene2()})}function initScene2(){PIXI.sound.play("s3"),gameScene=new GAME.GameScene2,stage.addChild(gameScene),gameScene.init(),gameScene.sceneIn(),gameScene.addEventListener("SCENE_OUT_COMPLETE",function(t){stage.removeChild(gameScene),gameScene=null})}function animate(){requestAnimationFrame(animate),GAME.renderer.render(GAME.stage),stats&&stats.update(),gameScene&&gameScene.update()}GAME.stageWidth=0,GAME.stageHeight=0,GAME.stage=null,GAME.canvas=null,GAME.renderer=null,GAME.SCENE_IN="sceneIn",GAME.SCENE_OUT="sceneOut",GAME.SCENE_IN_COMPLETE="sceneInComplete",GAME.SCENE_OUT_COMPLETE="sceneOutComplete",GAME.ON_ENTER_FRAME="onEnterFrame",GAME.retinaSupport=!0,GAME.imageScale=1,GAME.positionScale=1,GAME.Utils=GAME.Utils||{},GAME.Utils.inherit=function(t,e){t.superClass=e,t.prototype=Object.create(e.prototype),t.prototype.constructor=t},GAME.Utils.extend=function(t,e){if(!e||"object"!=typeof e)return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t},GAME.Utils.isAndroid=function(){for(var t=navigator.userAgent,e=new Array("Android","SymbianOS","Windows Phone"),i=!1,n=0;n<e.length;n++)if(t.indexOf(e[n])>0){i=!0;break}return i},GAME.Utils.isM2=function(){var t=!1;return navigator.userAgent.indexOf("m2")>0&&(t=!0),t},GAME.EventDispatcher=function(){},GAME.EventDispatcher.prototype={constructor:GAME.EventDispatcher,addEventListener:function(t,e){return this._listeners?this.removeEventListener(t,e):this._listeners={},this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),e},hasEventListener:function(t,e){var i=this._listeners;return!(!i||!i[t])},removeEventListener:function(t,e){if(this._listeners&&this._listeners[t])for(var i=this._listeners[t],n=0,s=i.length;n<s;n++)if(i[n]==e){1==s?delete this._listeners[t]:i.splice(n,1);break}},removeAllEventListeners:function(t){t?this._listeners&&delete this._listeners[t]:this._listeners=null},dispatchEvent:function(t,e){var i=!1,n=this._listeners;if(t&&n){var s=n[t];if(!s)return i;for(var o=(s=s.slice()).length;o--;){var r=s[o];i=i||r(e)}}return!!i}},GAME.AssetsManager=function(){var t=["assets/assets.json"],e={s1:"sound/s1.mp3",s2:"sound/s2.mp3",s3:"sound/s3.mp3",bg:"sound/bg.mp3"},i=new PIXI.loaders.Loader;this.onComplete=null,this.onProgress=function(t){console.log("加载百分比"+t.progress+"%")},this.start=function(){i.add(t),i.once("complete",this.onComplete),i.on("progress",this.onProgress),i.load(),PIXI.sound.add(e)}},GAME.Scene=function(){PIXI.Container.call(this)},GAME.Utils.inherit(GAME.Scene,PIXI.Container),GAME.Utils.extend(GAME.Scene.prototype,GAME.EventDispatcher.prototype),GAME.Scene.prototype.init=function(){},GAME.Scene.prototype.destroy=function(){},GAME.Scene.prototype.sceneIn=function(){this.dispatchEvent("SCENE_IN")},GAME.Scene.prototype.sceneOut=function(){this.dispatchEvent("SCENE_OUT")},GAME.Scene.prototype.sceneInComplete=function(){this.dispatchEvent("SCENE_IN_COMPLETE")},GAME.Scene.prototype.sceneOutComplete=function(){this.dispatchEvent("SCENE_OUT_COMPLETE")},GAME.GameScene1=function(){GAME.Scene.call(this);var t,e,i,n,s,o,r,a,l,h,c=this;this.init=function(){},this.sceneIn=function(){GAME.Scene.prototype.sceneIn.apply(this),function(){(t=new PIXI.Container).position.x=GAME.stageWidth/2,t.position.y=GAME.stageHeight,c.addChild(t),(h=PIXI.Sprite.fromFrame("t1.png")).anchor.x=.5,t.addChild(h),h.position.y=-GAME.stageHeight,h.alpha=0,TweenMax.to(h,1,{alpha:1,ease:Strong.easeOut,delay:.6}),l=new PIXI.Text("Text1",{font:"50px Helvetica",fill:"#FFFFFF"}),t.addChild(l),l.anchor.x=.5,l.anchor.y=1,l.alpha=0,TweenMax.to(l,1,{alpha:1,ease:Strong.easeOut,delay:1}),TweenMax.to(l.position,1,{y:-460,ease:Elastic.easeOut,delay:.8}),l.rotation=-.05,TweenMax.to(l,.1,{rotation:.1,ease:Linear.easeNone,repeat:-1,yoyo:!0,delay:2});var u=new PIXI.Graphics;u.lineStyle(0),u.beginFill(0,1),u.drawCircle(0,0,50),t.addChild(u),u.position.y=-460,l.mask=u,(i=PIXI.Sprite.fromFrame("pic1.jpg")).anchor.x=.5,i.anchor.y=1,t.addChild(i),i.alpha=0,TweenMax.to(i,1,{alpha:1,ease:Strong.easeOut,delay:1}),TweenMax.to(i.position,1,{y:Math.floor(-350),ease:Elastic.easeOut,delay:1}),(n=PIXI.Sprite.fromFrame("pic2.jpg")).anchor.x=.5,n.anchor.y=1,t.addChild(n),n.alpha=0,TweenMax.to(n,1,{alpha:1,ease:Strong.easeOut,delay:1.2}),TweenMax.to(n.position,1,{y:Math.floor(-210),ease:Elastic.easeOut,delay:1.2}),(r=PIXI.Sprite.fromFrame("btn1.png")).anchor.x=.5,r.anchor.y=1,t.addChild(r),r.alpha=0,TweenMax.to(r,1,{alpha:1,ease:Strong.easeOut,delay:1.4}),TweenMax.to(r.position,1,{y:-20,ease:Elastic.easeOut,delay:1.4}),r.interactive=!0,r.mousedown=r.touchstart=function(){TweenMax.to(t,.4,{alpha:0,onComplete:function(){c.removeChild(t),t=null}}),PIXI.sound.play("s2"),e=new PIXI.Container,c.addChild(e),(s=PIXI.Sprite.fromFrame("pic4.jpg")).position.x=0,s.position.y=100,e.addChild(s),s.alpha=0,TweenMax.to(s,.6,{alpha:1}),(o=PIXI.Sprite.fromFrame("pic5.png")).anchor.x=.5,o.anchor.y=.5,o.position.x=GAME.stageWidth/2,o.position.y=GAME.stageHeight/2,e.addChild(o),o.scale.x=o.scale.y=0,TweenMax.to(o.scale,1,{x:1,y:1,ease:Elastic.easeOut,delay:.8}),(a=PIXI.Sprite.fromFrame("btn2.jpg")).anchor.x=.5,a.anchor.y=.5,a.position.x=GAME.stageWidth/2,a.position.y=o.position.y+240,e.addChild(a),a.scale.x=a.scale.y=0,TweenMax.to(a.scale,1,{x:1,y:1,ease:Elastic.easeOut,delay:.9}),a.interactive=!0,a.mousedown=a.touchstart=function(){c.sceneOut()}}}(),!0},this.update=function(){},this.sceneOut=function(){GAME.Scene.prototype.sceneOut.apply(this),TweenMax.to(this,.4,{alpha:0,onComplete:function(){c.sceneOutComplete()}})}},GAME.Utils.inherit(GAME.GameScene1,GAME.Scene),GAME.GameScene2=function(){GAME.Scene.call(this);var t,e,i,n,s,o,r,a=this,l=!1;this.init=function(){},this.sceneIn=function(){GAME.Scene.prototype.sceneIn.apply(this),function(){(t=new PIXI.Container).x=GAME.stageWidth/2,t.y=GAME.stageHeight/2,a.addChild(t),(e=PIXI.Sprite.fromFrame("pic6.jpg")).anchor.x=.5,t.addChild(e),e.alpha=0,TweenMax.to(e,1,{alpha:1,ease:Strong.easeOut,delay:.6}),TweenMax.to(e,1,{y:-300,ease:Elastic.easeOut,delay:.6}),(i=PIXI.Sprite.fromFrame("pic7.png")).anchor.x=.5,i.anchor.y=.5,t.addChild(i),i.scale.x=i.scale.y=0,TweenMax.to(i.scale,1,{x:1,y:1,ease:Elastic.easeOut,delay:.8}),(n=PIXI.Sprite.fromFrame("pic8.png")).anchor.x=.5,n.anchor.y=.5,t.addChild(n),n.x=-134,n.y=-58,n.scale.x=n.scale.y=0,TweenMax.to(n.scale,1,{x:1,y:1,ease:Elastic.easeOut,delay:.9}),(s=PIXI.Sprite.fromFrame("pic9.png")).anchor.x=.5,s.anchor.y=.5,t.addChild(s),s.x=-54,s.y=-128,s.scale.x=s.scale.y=0,TweenMax.to(s.scale,1,{x:1,y:1,ease:Elastic.easeOut,delay:1}),(o=PIXI.Sprite.fromFrame("pic10.png")).anchor.x=.5,o.anchor.y=.5,t.addChild(o),o.x=61,o.y=-128,o.scale.x=o.scale.y=0,TweenMax.to(o.scale,1,{x:1,y:1,ease:Elastic.easeOut,delay:1.1}),(r=PIXI.Sprite.fromFrame("pic11.png")).anchor.x=.5,r.anchor.y=.5,t.addChild(r),r.x=134,r.y=-58,r.scale.x=r.scale.y=0,TweenMax.to(r.scale,1,{x:1,y:1,ease:Elastic.easeOut,delay:1.2}),h=new PIXI.ParticleContainer(1e4,{scale:!0,position:!0,alpha:!0}),a.addChild(h);for(var l=0;l<4;l++){var c=new PIXI.Sprite(PIXI.Texture.fromFrame("pic7.png"));c.interactive=!0,c.buttonMode=!0,c.anchor.set(.5),c.on("mousedown",p).on("touchstart",p).on("mouseup",d).on("mouseupoutside",d).on("touchend",d).on("touchendoutside",d).on("mousemove",f).on("touchmove",f),c.x=Math.floor(200*Math.random()),c.y=Math.floor(200*Math.random()),a.addChild(c),u(c)}}(),l=!0},this.update=function(){l&&function(){for(var t=0;t<c.length;t++){var e=c[t];e.alpha-=e.Aspeed,e.x+=e.Xspeed,e.y+=e.Yspeed,e.alpha<=0&&(e.x=e.parentObject.x,e.y=e.parentObject.y,e.alpha=1)}}()};var h,c=[];function u(t){for(var e=0;e<100;++e){var i=new PIXI.Sprite.fromFrame("star.png");i.anchor.set(.5),i.scale.set(Math.random()+1),i.x=t.x,i.y=t.y,i.parentObject=t,i.Xspeed=2*Math.random()-1,i.Yspeed=2*Math.random()-1,i.Aspeed=.01+.1*Math.random(),c.push(i),h.addChild(i)}}function p(t){this.data=t.data,this.alpha=.99,this.dragging=!0,this.id=this.data.identifier}function d(t){t.data.identifier==this.id&&(this.alpha=1,this.dragging=!1,this.data=null,this.id=null)}function f(t){if(t.data.identifier==this.id&&this.dragging){var e=this.data.getLocalPosition(this.parent);this.x=e.x,this.y=e.y}}this.sceneOut=function(){}},GAME.Utils.inherit(GAME.GameScene2,GAME.Scene),$(function(){$(window).resize(resizeCanvas),resizeCanvas(),init(),initStatsBar()});